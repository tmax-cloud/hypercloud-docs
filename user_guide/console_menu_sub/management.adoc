= [관리] 메뉴
:toc:
:toc-title:

*[관리]* 메뉴는 리소스를 제한하기 위한 리소스 및 커스텀 리소스를 관리할 수 있는 메뉴이다.

[width="100%",options="header", cols="1,3"]
|====================
|하위 메뉴|기능
|제한 범위|컨테이너 및 파드와 같은 리소스를 제한하는 "제한 범위"의 생성 및 조회
|리소스 쿼타|네임스페이스별로 사용할 수 있는 리소스의 양을 제한하는 "리소스 쿼타" 및 리소스 쿼타 생성을 위한 요구 사항을 정의하는 "리소스 쿼타 클레임"의 생성 및 조회
|파드 보안 정책|파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 '파드 보안 정책'의 생성 및 조회
|사용자 리소스 정의|커스텀 리소스의 유형을 정의하는 "CRD(커스텀 리소스 정의)"의 생성 및 조회
|====================

본 장에서는 하위 메뉴의 화면 구성과 기능에 대해서 설명한다.

== 제한 범위

"마스터 클러스터" 콘솔 메뉴에서 *[관리]* -> *[제한 범위]* 메뉴를 선택하면 *제한 범위* 메인 화면으로 이동한다. +
*제한 범위* 메인 화면에서는 컨테이너 및 파드와 같은 리소스를 제한하는 ``제한 범위`` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-basic-resource-main]
image::../images/figure_admin_limit_range_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
제한 범위를 생성하거나 제한 범위 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 제한 범위를 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (레이블, 이름)* +
제한 범위의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<4> *제한 범위 목록* +
네임스페이스에 생성된 제한 범위 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|제한 범위의 이름이다. 이때 이름을 클릭하면 해당 제한 범위의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|제한 범위가 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|생성 시간|제한 범위가 생성된 시간이다.
|image:../images/figure_action_icon.png[]|제한 범위의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 제한 범위 수정 : 제한 범위의 구성 정보를 수정
* 제한 범위 삭제 : 제한 범위를 삭제
|====================

== 리소스 쿼타

=== [리소스 쿼타] 탭

"마스터 클러스터" 콘솔 메뉴에서 *[관리]* -> *[리소스 쿼타]* 메뉴를 선택하면 *리소스 쿼타* 메인 화면으로 이동한다. +
*리소스 쿼타* 메인 화면의 *[리소스 쿼타]* 탭에서는 네임스페이스별로 사용할 수 있는 리소스의 양을 제한하는 ``리소스 쿼타``를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-resource-quota-main]
image::../images/figure_admin_resource_quota_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
리소스 쿼타를 생성하거나 리소스 쿼타 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 리소스 쿼타를 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (레이블, 이름)* +
리소스 쿼타의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<4> *리소스 쿼타 목록* +
네임스페이스에 생성된 리소스 쿼타 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|리소스 쿼타의 이름이다. 이때 이름을 클릭하면 해당 리소스 쿼타의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|리소스 쿼타가 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|image:../images/figure_action_icon.png[]|리소스 쿼타의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 리소스 쿼타 수정 : 리소스 쿼타의 구성 정보를 수정
* 리소스 쿼타 삭제 : 리소스 쿼타를 삭제
|====================

=== [리소스 쿼타 클레임] 탭

"마스터 클러스터" 콘솔 메뉴에서 *[관리]* -> *[리소스 쿼타]* 메뉴를 선택하면 *리소스 쿼타* 메인 화면으로 이동한다. +
*리소스 쿼타* 메인 화면의 *[리소스 쿼타 클레임]* 탭에서는 리소스 쿼타 생성을 위한 요구 사항을 정의하는 ``리소스 쿼타 클레임``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-resource-quota-claim-main]
image::../images/figure_admin_resource_quota_claim_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
리소스 쿼타 클레임을 생성하거나 리소스 쿼타 클레임 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 리소스 쿼타 클레임을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (상태)* +
리소스 쿼타 클레임의 상태 정보를 선택해서 검색한다. 이때 다중선택도 가능하다.

<4> *검색 조건 (레이블, 이름)* +
리소스 쿼타 클레임의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<5> *필터 목록* +
현재 설정된 필터 목록이 표시된다. 이때 필터 목록에서 image:../images/figure_del_icon.png[] 아이콘을 클릭하면 해당 필터의 설정이 해제되고, **[모든 필터 지우기]**를 클릭하면 모든 필터의 설정이 해제된다.

<6> *리소스 쿼타 클레임 목록* +
네임스페이스에 생성된 리소스 쿼타 클레임 목록을 확인할 수 있다. + 
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|리소스 쿼타 클레임의 이름이다. 이때 이름을 클릭하면 해당 리소스 쿼타 클레임의 상세 정보를 확인할 수 있는 화면이 열린다.
|상태|리소스 쿼타 클레임의 현재 승인 상태 정보이다.

* Awaiting : 클레임에 대한 허가를 기다리는 상태
* Approved : 클레임이 허가된 상태
* Reject : 클레임이 거절된 상태
* Error : 리소스 쿼타 생성에 실패한 상태
* ResourceQuota Deleted : 클레임을 통해 생성된 리소스 쿼타가 삭제된 상태
|네임스페이스|리소스 쿼타 클레임이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|생성 시간|리소스 쿼타 클레임이 생성된 시간이다.
|image:../images/figure_action_icon.png[]|리소스 쿼타 클레임의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 리소스 쿼타 클레임 수정 : 리소스 쿼타 클레임의 구성 정보를 수정
* 리소스 쿼타 클레임 삭제 : 리소스 쿼타 클레임을 삭제
* 승인 처리 : 리소스 쿼타 클레임의 승인 여부를 선택 (단, Approved 및 ResourceQuota Deleted 상태일 경우 비활성화)

** Approved : 승인
** Rejected : 승인 거절
|====================

== 파드 보안 정책

"마스터 클러스터" 콘솔 메뉴에서 *[관리]* -> *[파드 보안 정책]* 메뉴를 선택하면 *파드 보안 정책* 메인 화면으로 이동한다. +
*파드 보안 정책* 메인 화면에서는 파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 ``파드 보안 정책``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-pod-security-main]
image::../images/figure_admin_pod_security_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *생성 버튼* +
새로운 파드 보안 정책을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<2> *검색 조건 (레이블, 이름)* +
파드 보안 정책의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<3> *파드 보안 정책 목록* +
클러스터에 생성된 파드 보안 정책 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|파드 보안 정책의 이름이다. 이때 이름을 클릭하면 해당 파드 보안 정책의 상세 정보를 확인할 수 있는 화면이 열린다.
|특권 보유 여부|특권 모드의 사용 여부를 표시한다.

* True : 사용
* False : 사용 안 함
|보안 강화 리눅스|SELinux의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용
* RunAsAny : 모두 허용
|사용자로 실행|컨테이너를 실행할 사용자 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MustRunAsNonRoot : Root가 아닌 사용자만 허용
* RunAsAny : 모두 허용
|파일스토리지 그룹|일부 볼륨에 적용되는 보충 그룹(Supplemental Group)의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|보충 그룹|컨테이너가 추가할 그룹 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|image:../images/figure_action_icon.png[]|파드 보안 정책의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 파드 보안 정책 수정 : 파드 보안 정책의 구성 정보를 수정
* 파드 보안 정책 삭제 : 파드 보안 정책을 삭제
|====================

NOTE: 파드 보안 정책 제어는 어드미션 컨트롤러로 구현한다. (권장) +
어드미션 컨트롤러를 활성화하면 파드 보안 정책이 적용된다. 만약 정책을 승인하지 않고 활성화하면 클러스터에 파드가 생성되지 않는다. 따라서 기존 클러스터의 경우에는 어드미션 컨트롤러를 활성화하기 전에 정책을 추가하고 권한을 부여하는 것이 좋다. +
우선 kube-apiserver의 enable-adminssion-plugins 옵션에 PodSecurityPolicy를 추가하여 어드미션 컨트롤러를 활성화한다. 이후 RBAC(Role-Based Access Control)를 이용하여 생성된 파드 보안 정책으로 클러스터 롤을 생성하고, 생성된 클러스터 롤을 서비스 어카운트에 부여해서 정책을 적용할 수 있다.

== 사용자 리소스 정의

"마스터 클러스터" 콘솔 메뉴에서 *[관리]* -> *[사용자 리소스 정의]* 메뉴를 선택하면 *사용자 리소스 정의* 메인 화면으로 이동한다. +
*사용자 리소스 정의* 메인 화면에서는 커스텀 리소스의 유형을 정의하는 ``CRD(커스텀 리소스 정의)``를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-custom-resource-main]
image::../images/figure_admin_custom_resource_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *생성 버튼* +
새로운 CRD를 YAML 에디터를 사용해 생성한다.

<2> *검색 조건 (레이블, 이름)* +
CRD의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<3> *CRD 목록* +
클러스터에 생성된 CRD 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|CRD의 이름이다. 이때 이름을 클릭하면 해당 CRD의 상세 정보를 확인할 수 있는 화면이 열린다.
|그룹|REST API 사용을 위한 그룹 이름이다.
|버전|API의 버전 정보이다.
|범위|적용 범위를 표시한다.

* Namspaced : 특정 네임스페이스에 적용
* Cluster : 모든 네임스페이스에 적용 
|연결됨|CRD의 활성화 여부를 표시한다.
|image:../images/figure_action_icon.png[]|CRD의 관리를 위한 메뉴를 사용할 수 있다.+
이때 제공하는 메뉴는 다음과 같다.

* 인스턴스 확인 : CRD를 통해 생성된 커스텀 리소스 목록을 확인
* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 사용자 리소스 정의 수정 : CRD의 구성 정보를 수정
* 사용자 리소스 정의 삭제 : CRD를 삭제
|====================
